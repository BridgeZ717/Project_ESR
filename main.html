<!DOCTYPE html>
<html>

<head>
    <title></title>
    <!-- Chart JS -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>

</head>

<body>
    <canvas id="myChart"></canvas>
    <script>
        const xlabels = [];
        const ylabels = [];
        creatChart();

        async function creatChart() {
            await getData();
            const ctx = document.getElementById('myChart').getContext('2d');
            const chart = new Chart(ctx, {
                // The type of chart we want to create
                type: 'line',
                // The data for our dataset
                data: {
                    labels: xlabels,
                    datasets: [{
                        label: 'My First dataset',
                        //backgroundColor: 'rgb(255, 99, 132)',
                        borderColor: 'rgb(255, 99, 132)',
                        data: ylabels
                    }]
                },

                // Configuration options go here
                options: {}
            });
        }

        async function getData() {
            const response = await fetch('test.csv');
            const data = await response.text();
            console.log(data);

            const rows = data.split('\n').slice(1); //each line becomes to a variable, slice(1) -> ignore index 0(title) start from index 1
            rows.forEach(elt => {
                const row = elt.split(';');
                const BField = row[0];
                xlabels.push(BField);
                const mT = row[1];
                ylabels.push(mT);
                console.log(row);
            });
            console.log(rows);
        }
    </script>



</body>

</html>